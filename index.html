<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Steam Inventory Price</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Inter',-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;
      background:#0e1419;
      color:#e0e0e0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
    }
    /* боковые картинки-заглушки */
    .side-img{position:fixed;top:50%;transform:translateY(-50%);width:120px;height:120px;object-fit:cover;border-radius:8px;z-index:10}
    .left-img{left:20px}
    .right-img{right:20px}

    /* ===== КРАСОТА ===== */
    .card{animation:fadeIn 0.8s ease-out}
    @keyframes fadeIn{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}

    .card{
      background:#1b2838;
      border-radius:12px;
      padding:40px 32px;
      width:100%;
      max-width:480px;
      box-shadow:0 20px 40px rgba(0,0,0,.35);
      text-align:center;
    }
    h1{font-size:24px;margin-bottom:24px;color:#fff}
    .input-row{display:flex;gap:8px;margin-top:16px}
    .input-row input{flex:1;padding:14px 16px;border:1px solid #2a475e;border-radius:8px;background:#16202d;color:#fff;font-size:16px;transition:border .2s}
    .input-row input:focus{outline:none;border-color:#66c0f4}
    .input-row button{flex:0 0 120px;padding:14px;border:none;border-radius:8px;background:linear-gradient(90deg,#66c0f4 0%,#417a9b 100%);color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:transform .15s;position:relative;overflow:hidden}
    .input-row button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,#fff,transparent);transition:left 0.6s}
    .input-row button:hover::before{left:100%}
    .input-row button:hover{transform:translateY(-2px)}
    .input-row button:active{transform:translateY(0)}
    #result{margin-top:24px;min-height:24px;font-size:18px}
    .error{color:#ff9e9e}
    .success{color:#a1eac8}
    .loader{display:inline-block;width:18px;height:18px;border:2px solid rgba(255,255,255,.2);border-top-color:#fff;border-radius:50%;animation:spin 0.8s linear infinite,pulse 1s ease-in-out infinite}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}

    #mamaBtn{margin-top:12px;padding:10px 18px;border:1px solid #8f98a0;border-radius:8px;background:transparent;color:#8f98a0;font-size:14px;cursor:pointer;transition:.2s}
    #mamaBtn:hover{background:#8f98a0;color:#0e1419}

    #bgBtn{margin-left:8px;padding:10px 18px;border:1px solid #66c0f4;border-radius:8px;background:transparent;color:#66c0f4;font-size:14px;cursor:pointer;transition:.2s}
    #bgBtn:hover{background:#66c0f4;color:#0e1419}

    #totem{margin-top:20px;font-size:18px;font-weight:600;animation:slideUp 0.6s ease-out}
    @keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>

<body>
  <!-- боковые картинки-заглушки -->
  <img class="side-img left-img" src="left.png" alt="left">
  <img class="side-img right-img" src="right.png" alt="right">

  <!-- фоновая музыка -->
  <audio loop id="bgMusic">
    <source src="ivanzolo.mp3" type="audio/mpeg">
  </audio>

  <div class="card">
    <h1>Стоимость инвентаря Steam</h1>

    <div class="input-row">
      <input id="link" type="text" placeholder="https://steamcommunity.com/…" />
      <button id="checkBtn">Проверить</button>
    </div>

    <div>
      <button id="mamaBtn">Позвонить маме</button>
      <button id="bgBtn">Включить фон</button>
    </div>

    <div id="result"></div>
    <div id="totem"></div>
  </div>

  <!-- ========== КОМАНДА (без фоток сверху) ========== -->
  <section class="team">
    <h2>Команда разработчиков</h2>
    <div class="team-grid">
      <div class="member"><p class="name">Максим</p><p class="role">Главный тимлид<br>(держит Go за хвост)</p></div>
      <div class="member"><p class="name">Евгения</p><p class="role">Фронт-фея<br>(pixel-powered)</p></div>
      <div class="member"><p class="name">Саша1</p><p class="role">Тимлид-перегруз<br>(два стула – один Саша)</p></div>
      <div class="member"><p class="name">Иван</p><p class="role">Базист<br>(владеет Ctrl+C и Ctrl+V)</p></div>
      <div class="member"><p class="name">Саша2</p><p class="role">Технический писатель<br>(пишет, чтобы не пинали)</p></div>
    </div>
  </section>

  <script>
    const btn   = document.getElementById('checkBtn');
    const input = document.getElementById('link');
    const out   = document.getElementById('result');
    const totem = document.getElementById('totem');

    /* Mama */
    document.getElementById('mamaBtn').onclick = () => {
      alert('Мама уже знает. И она разочарована.');
    };

    /* Background music */
    const bgMusic = document.getElementById('bgMusic');
    const bgBtn   = document.getElementById('bgBtn');
    bgBtn.onclick = () => {
      bgMusic.volume = 0.25;
      bgMusic.play()
        .then(() => bgBtn.textContent = 'Фон играет')
        .catch(err => alert('Аудио заблокировано: ' + err));
    };

    /* Inventory check */
    btn.onclick = async () => {
      const val = input.value.trim();
      if(!val) return show('Вставьте ссылку','error');

      lock(true);
      totem.style.display='none';
      try{
        const res = await fetch('https://postavte5zazolo.com.up.railway.app/check',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({link:val})
        });
        if(!res.ok) throw new Error('Сервер вернул ошибку');
        const data = await res.json();
        const rub = data.total_value * 75;
        show(`${rub.toLocaleString('ru-RU')}₽`,'success');
        showTotem(rub);
      }catch(e){
        show(e.message || 'Не удалось получить данные','error');
      }finally{
        lock(false);
      }
    };

    function showTotem(rub){
      let animal='';
      if(rub<=20000)      animal='Иван Золо';
      else if(rub<=500000) animal='StRoGo';
      else if(rub<=1200000) animal='S1mple';
      else               animal='Donk';
      totem.innerHTML=`Твоё тотемное животное: <span style="color:#66c0f4">${animal}</span>`;
      totem.style.display='block';
      totem.style.animation='slideUp 0.6s ease-out';
    }

    function lock(on){
      input.disabled = on;
      btn.disabled   = on;
      btn.textContent= on ? '' : 'Проверить';
      if(on) btn.innerHTML='<span class="loader"></span>';
    }
    function show(msg,cls){
      out.innerHTML = `<span class="${cls}">${msg}</span>`;
      // анимация цифр
      const span = out.querySelector('span');
      if(span && cls==='success'){
        span.style.transform='translateY(-4px)';
        setTimeout(()=>span.style.transform='translateY(0)',300);
      }
    }
  </script>
</body>
</html>
